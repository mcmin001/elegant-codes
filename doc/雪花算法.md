### 雪花算法

##### 一、前言

恰如每个人都有身份证，身份证号码是我们每一个社会人身份的唯一标识。在一个数据系统中，常常也为每一条数据设置一个唯一标识identity，即ID，用以在众多的数据集合中，标识其唯一性。因此其ID值设置的原则就是，在系统内(指定范围内)不能重复。

本文就来介绍下业内大名鼎鼎的分布式ID生成算法：<b>雪花算法</b>

##### 二、 起源

雪花算法由Twitter出品，尤其适合在分布式场景下生成ID。

##### 三、 简介

雪花算法生成的ID是一个64位的长整形数字。如下所示：

![snowflake](https://doc-image-1306912501.cos.ap-hongkong.myqcloud.com/snow_flake.png)



由上图可见，雪花算法产生的这个64位二进制由四部分组成。

1、整数分为无符号整形与有符号整形，因为我们这里生成的是ID，因此我们默认都是非负整数。所以雪花算法生成的64位ID中的最高位为0

2、第二部分是一段41bit的时间戳

3、第三部分是10bit的机器信息，其中机器信息又可分为5bit的workerId与5bit的datacenterId

4、最后一部分是12bit的序列号

由以上四部分组成的ID，基本可以保证在一个系统内的任何机器上产生的ID值不可能重复















